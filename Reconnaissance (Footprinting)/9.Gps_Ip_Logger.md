# 📘 IP Logger (PHP)
A simple PHP script to log visitor IPs, user agents, referrers, and timestamps into an HTML file.

## 🚀 Setup

### Create directory
mkdir ip-logger

### Set permissions
chown -R www-data:www-data ip-logger

### Edit your PHP logger
vim ip-logger/index.php

## 📝 PHP Script (index.php)

    <?php
    function getRealIpAddr() {
       if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        return $_SERVER['HTTP_CLIENT_IP'];
      } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        return explode(',', $_SERVER['HTTP_X_FORWARDED_FOR'])[0];
      } else {
        return $_SERVER['REMOTE_ADDR'];
      }
    }

    $realIp = getRealIpAddr();
    $remoteIp = $_SERVER['REMOTE_ADDR'];
    $uri = $_SERVER['REQUEST_URI'] ?? 'Unknown';
    $referrer = $_SERVER['HTTP_REFERER'] ?? 'Direct Access / Unknown';
    $userAgent = $_SERVER['HTTP_USER_AGENT'] ?? 'Unknown';
    $dateTime = date('Y-m-d H:i:s');

    $logEntry = <<<LOG
    <hr>
    <b>Date:</b> $dateTime<br>
    <b>IP (REMOTE_ADDR):</b> $remoteIp<br>
    <b>IP (Detected):</b> $realIp<br><hr>
    <b>Page:</b> $uri<br>
    <b>Referrer:</b> $referrer<br>
    <b>User-Agent:</b> $userAgent<br>
    LOG;

    file_put_contents("log.html", $logEntry . PHP_EOL, FILE_APPEND | LOCK_EX);
    ?>

## 📂 Output Log

Logs will be written to log.html in this format:

    <hr>
    <b>Date:</b> 2025-07-03 12:45:22<br>
    <b>IP (REMOTE_ADDR):</b> 192.168.1.100<br>
    <b>IP (Detected):</b> 192.168.1.100<br>
    <b>Page:</b> /ip-logger.php<br>
    <b>Referrer:</b> https://example.com<br>
    <b>User-Agent:</b> Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...

## 🔒 Recommended: Protect the Log File

Use an .htaccess to block web access to log.html.

    <Files "log.html">
        Order Allow,Deny
        Deny from all
    </Files>

## ⚠️ Notes

###  For red teaming or lab use only.

- ⚖️ Be careful with user privacy — logging IPs without consent may violate laws.

- 🕵️ You can embed this script in a webpage disguised as any file or URL shortener for bait (only in legal / controlled environments).
